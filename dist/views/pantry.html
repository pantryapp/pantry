<div ng-controller="pantryItemsController as pantryItems">

  <offside-content class="view-main-content" toggle-on="pantryItems.formToggled">

    <nav class="contextual-nav">
      <div class="pull-right">

        <button type="button" ng-click="pantryItems.toggleForm('new');" ng-show="!pantryItems.forms.new && !pantryItems.forms.edit" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-plus"></span></button>

        <button type="button" ng-click="pantryItems.closeForms();" ng-show="pantryItems.forms.new || pantryItems.forms.edit" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-remove"></span></button>

      </div>
    </nav>

    <table class="table table-stripped table-hover">
      <caption>Liste des items dans votre garde-manger</caption>
      <thead>
        <tr>
          <th ng-click="pantryItems.orderBy('name')">
            Item

            <span class="glyphicon glyphicon-sort-by-attributes" ng-show="pantryItems.orderByProp.value == 'name' && !pantryItems.orderByProp.reverse"></span>

            <span class="glyphicon glyphicon-sort-by-attributes-alt" ng-show="pantryItems.orderByProp.value == 'name' && pantryItems.orderByProp.reverse"></span>

          </th>

          <th ng-click="pantryItems.orderBy('category')">
            Catégorie

            <span class="glyphicon glyphicon-sort-by-attributes" ng-show="pantryItems.orderByProp.value == 'category' && !pantryItems.orderByProp.reverse"></span>

            <span class="glyphicon glyphicon-sort-by-attributes-alt" ng-show="pantryItems.orderByProp.value == 'category' && pantryItems.orderByProp.reverse"></span>

          </th>

          <th ng-click="pantryItems.orderBy('outofstock')">
            En stock

            <span class="glyphicon glyphicon-sort-by-attributes" ng-show="pantryItems.orderByProp.value == 'outofstock' && !pantryItems.orderByProp.reverse"></span>

            <span class="glyphicon glyphicon-sort-by-attributes-alt" ng-show="pantryItems.orderByProp.value == 'outofstock' && pantryItems.orderByProp.reverse"></span>

          </th>
          <th></th>
        </tr>
      </thead>

      <tbody>
        <tr ng-repeat="pantryItem in pantryItems.getItems() | orderBy:pantryItems.orderByProp.value:pantryItems.orderByProp.reverse">
          <td>{{ pantryItem.name }}</td>
          <td>{{ pantryItem.category }}</td>
          <td>
            <span class="glyphicon glyphicon-ok-circle" ng-show="!pantryItem.outofstock"></span>
          </td>
          <td>
            <button button-edit ng-click="pantryItems.toggleEditForm(pantryItem);"></button>
            <button button-out-of-stock ng-show="!pantryItem.outofstock" ng-click="pantryItems.toggleOutOfStock(pantryItem)"></button>
            <button button-buy ng-show="pantryItem.outofstock" ng-click="pantryItems.toggleOutOfStock(pantryItem)"></button>
            <button button-delete confirmation-needed="Êtes vous certain de vouloir supprimer {{ pantryItem.name }} ?" ng-click="pantryItems.deleteItem(pantryItem)"></button>
          </td>
        </tr>
      </tbody>

    </table>

  </offside-content>

  <pantry-item-new-form class="offside-content" ng-show="pantryItems.forms.new"></pantry-item-new-form>
  <pantry-item-edit-form class="offside-content" ng-show="pantryItems.forms.edit"></pantry-item-edit-form>

</div>
